SET ANSI_NULLS ON
SET QUOTED_IDENTIFIER ON
GO
-- ==================================================================================================================================================================================-- Versi贸n:				<1.0>-- Creado por:			<Aida Elena Siles R>-- Fecha de creaci贸n:	<03/08/2021>-- Descripci贸n:			<Permite consultar un registro en la tabla: AsignadosPaseFallo.>-- ==================================================================================================================================================================================CREATE PROCEDURE	[Historico].[PA_ConsultarAsignadosPaseFallo]	@CodPaseFallo				UNIQUEIDENTIFIER	= NULL,		@CodPuestoTrabajo			VARCHAR(14)			= NULLASBEGIN	--Variables	DECLARE	@L_TU_CodPaseFallo			UNIQUEIDENTIFIER	= @CodPaseFallo,			@L_TC_CodPuestoTrabajo		VARCHAR(14)			= @CodPuestoTrabajo	--L贸gica	SELECT		B.TF_FechaAsignacion							FechaAsignacion,				A.TU_CodPaseFallo								Codigo,				'Split'                                         Split, --PuestoTrabajoFuncionario				G.Codigo										Codigo,				'Split'											Split,--PuestoTrabajo				A.TC_CodPuestoTrabajo							Codigo,				C.TC_Descripcion								Descripcion,				'Split'											Split, --Funcionario				G.Nombre										Nombre,				G.PrimerApellido								PrimerApellido,				G.SegundoApellido								SegundoApellido	FROM		Historico.AsignadosPaseFallo					A WITH (NOLOCK)	INNER JOIN  Historico.PaseFallo								B WITH (NOLOCK)	ON			A.TU_CodPaseFallo								= B.TU_CodPaseFallo	OUTER APPLY	Catalogo.FN_ConsultarFuncionarioPorPuestoTrabajo(A.TC_CodPuestoTrabajo) AS G	INNER JOIN  Catalogo.PuestoTrabajo                          C WITH (NOLOCK)	ON			A.TC_CodPuestoTrabajo							= C.TC_CodPuestoTrabajo	WHERE		A.TU_CodPaseFallo								= COALESCE(@L_TU_CodPaseFallo, A.TU_CodPaseFallo)	AND			A.TC_CodPuestoTrabajo							= COALESCE(@L_TC_CodPuestoTrabajo, A.TC_CodPuestoTrabajo)END
GO
